<div
  class="glass-surface border border-zinc-800 rounded-2xl overflow-hidden min-w-[360px] animate-shuttle"
>
  <div class="px-8 py-6 border-b border-zinc-900 bg-zinc-900/40">
    <h2 class="text-[10px] font-black uppercase tracking-[0.4em] text-zinc-600 m-0">
      Protocol: Identity Uplink
    </h2>
  </div>
  <div
    class="upload-area !m-8 !rounded-2xl border-2 border-dashed border-zinc-800 hover:border-white transition-all cursor-pointer flex flex-col items-center justify-center min-h-[200px]"
    (click)="filePicker.click()"
    [class.has-image]="imgPreview()"
  >
    @if (imgPreview()) {
      <div class="image-preview w-full h-full relative group">
        <img
          [src]="imgPreview()"
          alt="upload image"
          class="w-full h-full object-cover rounded-2xl"
        />
        <div
          class="absolute inset-0 bg-black/60 flex flex-col items-center justify-center opacity-0 group-hover:opacity-100 transition-all rounded-2xl backdrop-blur-sm"
        >
          <i class="pi pi-sync text-2xl mb-2 text-white"></i>
          <span class="text-[10px] font-black tracking-widest uppercase">Change Signal</span>
        </div>
      </div>
    } @else {
      <div class="upload-placeholder flex flex-col items-center text-center">
        <i class="pi pi-cloud-upload text-4xl mb-4 text-zinc-700"></i>
        <p class="text-[11px] uppercase font-black tracking-[0.3em] text-zinc-500">
          Initialize Source
        </p>
        <span class="text-[9px] text-zinc-800 mt-2 tracking-widest">JPG, PNG ACCEPTED</span>
      </div>
    }
  </div>

  @if (imgFile) {
    <div
      class="file-info flex items-center gap-4 px-6 py-3 bg-white/5 rounded-xl border border-zinc-800 mb-8 mx-8"
    >
      <i class="pi pi-file text-white opacity-40"></i>
      <span class="file-name text-[10px] font-bold text-zinc-400 uppercase tracking-tight">{{
        imgFile.name
      }}</span>
    </div>
  }

  @if (errorMsg()) {
    <p
      class="error-msg text-red-500 text-[10px] font-black uppercase tracking-widest mb-8 mx-8 flex items-center gap-2"
    >
      <i class="pi pi-exclamation-triangle"></i>
      {{ errorMsg() }}
    </p>
  }

  <input
    type="file"
    #filePicker
    (change)="onImgPicked($event)"
    accept=".jpg, .png"
    style="display: none"
  />

  <div class="px-8 py-6 bg-zinc-900/40 border-t border-zinc-900 flex justify-end gap-4">
    <button
      pButton
      label="ABORT"
      (click)="_ref.close()"
      class="p-button-text !text-[10px] font-black tracking-[0.3em] text-zinc-700 hover:text-red-500"
    ></button>
    <button
      pButton
      label="UPLINK IMAGE"
      icon="pi pi-bolt"
      (click)="onSubmit()"
      [disabled]="!imgFile"
      class="p-button-primary h-14 px-10 rounded-xl !text-[10px] font-black tracking-[0.3em]"
    ></button>
  </div>
</div>
