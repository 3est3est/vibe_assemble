<div class="upload-dialog">
  <!-- Header -->
  <div class="dialog-header">
    <div class="header-icon">
      <i class="pi pi-camera"></i>
    </div>
    <div>
      <h2 class="dialog-title">Update Profile Image</h2>
      <p class="dialog-subtitle">JPG, PNG up to 5MB</p>
    </div>
  </div>

  <!-- Upload Zone -->
  <div class="dialog-body">
    <div class="upload-zone" (click)="filePicker.click()" [class.has-image]="imgPreview()">
      @if (imgPreview()) {
        <div class="preview-wrap">
          <img [src]="imgPreview()" alt="preview" class="preview-img" />
          <div class="preview-overlay">
            <i class="pi pi-sync"></i>
            <span>Change Image</span>
          </div>
        </div>
      } @else {
        <div class="upload-placeholder">
          <div class="upload-icon-wrap">
            <i class="pi pi-cloud-upload"></i>
          </div>
          <p class="upload-title">Click to upload</p>
          <span class="upload-hint">Supports JPG and PNG</span>
        </div>
      }
    </div>

    @if (imgFile) {
      <div class="file-info">
        <i class="pi pi-image"></i>
        <span class="file-name">{{ imgFile.name }}</span>
        <span class="file-size">{{ (imgFile.size / 1024).toFixed(0) }} KB</span>
      </div>
    }

    @if (errorMsg()) {
      <div class="error-msg">
        <i class="pi pi-exclamation-triangle"></i>
        {{ errorMsg() }}
      </div>
    }
  </div>

  <input
    type="file"
    #filePicker
    (change)="onImgPicked($event)"
    accept=".jpg,.png,.jpeg"
    style="display: none"
  />

  <!-- Footer -->
  <div class="dialog-footer">
    <button pButton label="Cancel" (click)="_ref.close()" class="btn-cancel"></button>
    <button
      pButton
      label="Upload"
      icon="pi pi-upload"
      (click)="onSubmit()"
      [disabled]="!imgFile"
      class="btn-submit"
    ></button>
  </div>
</div>
