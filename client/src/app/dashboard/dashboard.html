<div class="dashboard-container">
  <header class="page-header">
    <h1>Analytics</h1>
    <p>Operational overview and tactical mission intelligence.</p>
  </header>

  <section class="summary-grid">
    <div class="stat-card primary">
      <span class="label">Total Missions</span>
      <span class="value">{{ stats.total }}</span>
    </div>
    <div class="stat-card info">
      <span class="label">InProgress</span>
      <span class="value">{{ stats.inProgress }}</span>
    </div>
    <div class="stat-card success">
      <span class="label">Completed</span>
      <span class="value">{{ stats.completed }}</span>
    </div>
    <div class="stat-card warning">
      <span class="label">Success Rate</span>
      <span class="value">{{ stats.successRate }}%</span>
    </div>
    <div class="stat-card danger">
      <span class="label">XP Accumulated</span>
      <span class="value">{{ stats.totalExp }}</span>
    </div>
  </section>

  <div class="dashboard-content">
    <section class="section-card">
      <h3 class="section-title">
        <mat-icon>history</mat-icon>
        Recent Activity
      </h3>

      <div class="activity-list">
        @for (mission of recentMissions; track mission.id) {
          <div class="activity-item">
            <div [class]="'status-dot ' + mission.status.toLowerCase()"></div>
            <div class="info">
              <span class="name">{{ mission.name }}</span>
              <span class="timestamp">{{ mission.updated_at | date: 'MMM d, h:mm a' }}</span>
            </div>
            <span class="badge">{{ mission.status }}</span>
          </div>
        } @empty {
          <div class="empty-state">
            <p>No recent activity detected.</p>
          </div>
        }
      </div>
    </section>

    <aside class="dashboard-sidebar">
      <section class="section-card">
        <h3 class="section-title">
          <mat-icon>analytics</mat-icon>
          Efficiency
        </h3>

        <div class="performance-grid">
          <div class="progress-stat">
            <div class="label-group">
              <span class="label">Integrity</span>
              <span class="value">{{ stats.successRate }}%</span>
            </div>
            <div class="progress-bg">
              <div class="progress-fill" [style.width.%]="stats.successRate"></div>
            </div>
          </div>

          <div class="progress-stat">
            <div class="label-group">
              <span class="label">Avg Crew</span>
              <span class="value">{{ stats.avgCrewSize | number: '1.1-1' }}</span>
            </div>
            <div class="progress-bg">
              <div class="progress-fill" [style.width.%]="(stats.avgCrewSize / 10) * 100"></div>
            </div>
          </div>
        </div>
      </section>

      <div class="exp-widget">
        <span class="label">Total Capacity</span>
        <div class="value">{{ stats.totalExp }}</div>
        <span class="label">EXP</span>
      </div>
    </aside>
  </div>
</div>
