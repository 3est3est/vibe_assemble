<div class="my-crew-container">
  <div class="bg-mesh"></div>

  <div class="godly-hero-my-crew">
    <!-- MY CREW OS WINDOW -->
    <main class="os-window-base os-crew-window">
      <!-- NAVIGATION SIDEBAR -->
      <aside class="os-sidebar-base os-crew-sidebar">
        <div class="os-dot-controls mb-8"><span></span><span></span><span></span></div>

        <div class="flex flex-col gap-1 mb-10">
          <div class="os-crew-nav-item active">
            <span>Active Deployments</span>
          </div>
          <div class="os-crew-nav-item" routerLink="/missions">
            <span>Protocol Search</span>
          </div>
        </div>

        <div class="mt-auto pt-8 border-t border-white/5">
          <span class="os-label">Squadron_Status</span>
          <div class="flex items-center gap-3">
            <div class="presence-dot-os"></div>
            <span class="text-[9px] font-black text-white uppercase tracking-widest"
              >Signal Locked</span
            >
          </div>
        </div>
      </aside>

      <!-- MAIN CONTENT AREA -->
      <section class="os-main-base os-crew-main">
        <div class="os-title-bar mb-10">
          <div class="flex flex-col py-4">
            <span class="os-label">Operational_Sectors</span>
            <h1 class="os-title-large">My <span class="opacity-30 italic">Groups</span></h1>
          </div>
        </div>

        <div class="crew-grid overflow-y-auto hide-scrollbar pb-20">
          @for (mission of myJoinedMissions$ | async; track mission.id; let i = $index) {
            <div
              class="os-glass-card mission-card-os group"
              [routerLink]="['/missions', mission.id]"
            >
              <div class="os-label text-zinc-600 mb-6 flex justify-between">
                <span>{{ mission.category || 'General' }}</span>
                <span class="opacity-30">#{{ mission.id }}</span>
              </div>

              <h3
                class="text-2xl font-black uppercase tracking-tight mb-4 group-hover:text-white transition-colors"
              >
                {{ mission.name }}
              </h3>

              <div class="flex items-center gap-4 mb-8">
                <img
                  [src]="'https://ui-avatars.com/api/?name=' + mission.chief_display_name"
                  class="w-6 h-6 rounded-lg opacity-60"
                />
                <span class="text-[9px] font-black text-zinc-500 uppercase tracking-widest">{{
                  mission.chief_display_name
                }}</span>
              </div>

              <div class="flex gap-2">
                <button
                  pButton
                  label="ENTER"
                  class="flex-grow h-12 p-button-primary rounded-xl text-[9px] font-black"
                ></button>
                <button
                  (click)="onLeave(mission, $event); $event.stopPropagation()"
                  class="w-12 h-12 rounded-xl bg-white/[0.03] border border-white/5 text-zinc-600 hover:text-red-500 transition-colors flex items-center justify-center"
                >
                  <i class="pi pi-sign-out text-[10px]"></i>
                </button>
              </div>
            </div>
          } @empty {
            <div class="col-span-full py-40 flex flex-col items-center justify-center opacity-10">
              <i class="pi pi-folder-open text-6xl mb-8"></i>
              <p class="text-xs font-black uppercase tracking-[0.5em]">
                No active deployments found
              </p>
              <button
                routerLink="/missions"
                class="mt-8 px-8 h-12 rounded-xl border border-white/10 text-[9px] font-black uppercase tracking-widest hover:bg-white/5"
              >
                Locate Protocol
              </button>
            </div>
          }
        </div>
      </section>
    </main>
  </div>
</div>
