<div class="my-crew-container">
  <div class="godly-hero-my-crew">
    <div class="page-layout">
      <!-- SIDEBAR -->
      <aside class="page-sidebar">
        <div class="os-dot-controls"><span></span><span></span><span></span></div>
        <div class="flex flex-col gap-1">
          <div class="os-nav-item active">
            <i class="pi pi-users"></i>
            <span>Active Groups</span>
          </div>
          <div class="os-nav-item" routerLink="/missions">
            <i class="pi pi-search"></i>
            <span>Discover More</span>
          </div>
        </div>
      </aside>

      <!-- MAIN -->
      <section class="page-main">
        <div class="page-header">
          <h1 class="page-title">My Groups</h1>
        </div>

        <div class="crew-grid hide-scrollbar overflow-y-auto">
          @for (mission of myJoinedMissions$ | async; track mission.id; let i = $index) {
            <div class="mission-card-os group" [routerLink]="['/missions', mission.id]">
              <div class="card-content">
                <div class="flex justify-between items-start mb-2">
                  <span class="label" style="margin: 0">{{ mission.category || 'Event' }}</span>
                  <span class="label opacity-20">#{{ mission.id }}</span>
                </div>

                <h3 class="mission-title">{{ mission.name }}</h3>

                <div class="flex items-center gap-2 mb-4">
                  <img
                    [src]="
                      'https://ui-avatars.com/api/?name=' +
                      mission.chief_display_name +
                      '&background=random'
                    "
                    class="w-5 h-5 rounded-full"
                  />
                  <span style="font-size: 11px; color: var(--text-muted)">{{
                    mission.chief_display_name
                  }}</span>
                </div>

                <div class="flex gap-2 mt-auto">
                  <button class="btn btn-primary flex-grow" style="height: 36px">ENTER</button>
                  <button
                    (click)="onLeave(mission, $event); $event.stopPropagation()"
                    class="btn btn-subtle"
                    style="width: 36px; height: 36px; padding: 0"
                    title="Leave Group"
                  >
                    <i class="pi pi-sign-out" style="font-size: 12px"></i>
                  </button>
                </div>
              </div>
            </div>
          } @empty {
            <div
              class="col-span-full py-32 flex flex-col items-center justify-center gap-3"
              style="color: var(--text-muted)"
            >
              <i class="pi pi-folder-open" style="font-size: 32px"></i>
              <p style="font-size: 13px">No active groups found</p>
              <button routerLink="/missions" class="btn btn-ghost btn-sm mt-2">
                Discover Sessions
              </button>
            </div>
          }

          <!-- Discover Link Card -->
          <div
            routerLink="/missions"
            class="col-span-full mt-4 p-8 rounded-2xl border border-dashed border-white/10 flex items-center justify-between cursor-pointer hover:bg-white/5 transition-all group"
          >
            <div>
              <p style="font-size: 14px; font-weight: 600; color: var(--text-primary)">
                + Discover more groups
              </p>
              <p style="font-size: 12px; color: var(--text-muted)">
                Find activities that match your vibe
              </p>
            </div>
            <i class="pi pi-arrow-right" style="color: var(--text-muted)"></i>
          </div>
        </div>
      </section>
    </div>
  </div>
</div>
